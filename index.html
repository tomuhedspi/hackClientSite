<!DOCTYPE html>
<html lang="en">
<head>
  <title>Hack Não BK</title>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.2/dist/css/bootstrap.min.css">
  <script src="https://cdn.jsdelivr.net/npm/jquery@3.6.3/dist/jquery.slim.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.1/dist/umd/popper.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.2/dist/js/bootstrap.bundle.min.js"></script>
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.3/jquery.min.js"></script>
  <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.7.0/css/all.css" integrity="sha384-lZN37f5QGtY3VHgisS14W3ExzMWZxybE1SJSEsQp9S+oqd12jhcu+A56Ebc1zFSJ" crossorigin="anonymous">

  <style>
    p.ridge {border-style: ridge;}
    /* Set height of the grid so .sidenav can be 100% (adjust if needed) */
    .row.content {height: 800px }
    
    /* Set gray background color and 100% height */
    .sidenav {
      background-color: #f1f1f1;
      height: 80%;
      
    }
    
    /* Set black background color, white text and some padding */
    footer {
      background-color: #555;
      color: white;
      padding: 15px;
    }
    
    /* On small screens, set height to 'auto' for sidenav and grid */
    @media screen and (max-width: 767px) {
      .sidenav {
        height: 150px;
        padding: 15px;
      }
      .row.content {height: auto;} 
    }

  </style>



<script>
  var datalist;
  var DATA_SERVER_GET = "https://nguyenthithom.name.vn/api/chars";
  var DATA_SERVER_POST_COMMENT = "https://nguyenthithom.name.vn/api/chars/word_id/comment";
  var table = document.getElementById("myTable");


  $(document).ready(function(){
    setWordList(DATA_SERVER_GET);
  });

    function sendComment(){
      var comment_url = DATA_SERVER_POST_COMMENT.replace("word_id",$("#word_id").val());
      console.log(comment_url);
      var body=getCommentParam();
      console.log(body);


    };
    function getCommentParam(){
      var obj=new Object();

      obj.search = $("#input_comment").val();
      obj.author_name = "Thành Viên";

      return obj;
    };


    function trclick(){};

    function tdclick(i){
        var detail =datalist[i];
        
        $("#word_id").val(detail['id']);
        $("#word_text").text(detail['word']);
        $("#word_reading").text(detail['reading']);
        $("#word_meaning").text(detail['meaning']);
        $("#word_note").text(detail['note']);
    };

    function setWordList(url){
    $.getJSON(url, function(dataFromServer){
      datalist = dataFromServer.data;
      var detail ;
      var row ;
      var cell1;
      var cell2;
      var markup;
      for (let i = 0; i < datalist.length; i++) {
        detail = datalist[i];
        markup = "<tr onclick='tdclick("+i+");'><td>" + detail['word'] + "</td><td>" + detail['meaning'] + "</td></tr>";
        $('#myTable > tbody:last-child').append(markup); 
      }
    });
    };

    function searchWord(){
      var obj=getSearchParam();
      var url = DATA_SERVER_GET + '?'+ $.param(obj);
      setWordListClean();
      setWordList(url);
    };

    function getSearchParam(){
      var obj=new Object();

      var keyword =$("#input_keyword").val();
      var type =$('#combo :selected').val();
      var obj=new Object();
      obj.search = keyword;
      obj.type = type;

      return obj;
    };


    function setWordListClean(){
      $("#myTable > tbody").empty();
    }

  </script>

</head>
<body>

<nav class="navbar navbar-expand-sm navbar-dark" style="background-color: rgba(9, 110, 235, 0.754);"  >
  <!-- Brand/logo -->
  <a class="navbar-brand" href="#">
    <img src="image/icon.png" alt="Hack Não BK" id ="app_icon"style="width:40px;">
  </a>
  
  <!-- Links -->
  <ul class="navbar-nav">
    <li class="nav-item active">
      <a class="nav-link" href="index.html">HOME</a>
    </li>
    <li class="nav-item">
      <a class="nav-link" href="unit.html">BÀI HỌC</a>
    </li>
    <li class="nav-item">
      <a class="nav-link" href="info.html">LIÊN HỆ</a>
    </li>
  </ul>
</nav>

<div class="container-fluid">
  <div class="row content">
    <div class="col-sm-3 sidenav">

      <select id="combo" onchange="searchWord()" style="background-color: rgb(66, 135, 245,0.6); border: none;width: 40%; border-radius: 3px; color: #FFFFFF; margin: 4px; padding: 3px; font-size: 10px;">
        <option value="0"class="btn btn-primary" >TỪ VỰNG</option>
        <option value="1"class="btn btn-primary" >HÁN TỰ</option>
      </select>

      <div class="input-group mb-3 margin:3">
        <input type="text" class="form-control" required placeholder="VD:花 はな hoa" id="input_keyword" onkeyup="searchWord();" 　>
        <div class="input-group-append">
          <button class="btn btn-primary" type="submit" onclick="searchWord();" id="btn_search"><i class="fas fa-search"></i></button> 
        </div>
      </div>
      <div style="height: 85%; overflow: auto;">
        <table id="myTable" class="table table-hover" >
          <colgroup>
            <col span="1" style="width: 30%;">
            <col span="1" style="width: 70%;">
         </colgroup>
          <tbody id="word_table"  style="font-size: small;">
          </tbody>
        </table>
      </div>
    </div>

    <div class="col-sm-9">
      <input type="hidden" id="word_id" value ="1" >
      <h2 id="word_text"></h2>
      <h5><span class="label label-success" id="word_reading"></span></h5>
      <!-- <p id="word_note" id="word_meaning">tôi</p> -->
      <p id="word_meaning"></p>
      <h5 id="word_note"></h5>
      <hr>

      <p>Comment:</p>
      <form role="form">
        <div class="form-group">
          <textarea class="form-control" rows="1" required id="input_comment"></textarea>
        </div>
        <button type="submit" class="btn btn-outline-primary btn-sm" id="btn_comment" onclick="sendComment();">Gửi Comment</button>
      </form>
      <br><br>

      <div class="row" id="user_comment">
        <div class="col-sm-2 text-center">
          <img src="image/user.png" height="50" width="50" alt="Avatar">
        </div>
        <div class="col-sm-10">
          <p style="font-size: medium;" id="cmt_content">noi dung nhan xet</p>
          <p style="font-size: 8px;" id="cmt_author_name">nguoi dung</p>
          <br>
        </div>
      </div>
    </div>
  </div>
</div>
</body>
</html>

